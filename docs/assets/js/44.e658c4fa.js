(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{340:function(t,s,a){"use strict";a.r(s);var n=a(10),e=Object(n.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"网站部署"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#网站部署"}},[t._v("#")]),t._v(" 网站部署")]),t._v(" "),s("h2",{attrs:{id:"一键合并分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一键合并分支"}},[t._v("#")]),t._v(" 一键合并分支")]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("package.json")]),t._v(" 中添加以下命令，临时使用 bash 执行一串git命令：")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# 重点是：bash -c \\"一堆bash脚本\\"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"merge-to-dev"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bash -c '),s("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("cur_branch="),s("span",{pre:!0,attrs:{class:"token variable"}},[s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$(")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" branch --show-current"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v(")")])]),t._v("; git checkout develop && git pull && git merge --no-edit "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cur_branch")]),t._v(" && git push && git checkout "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$cur_branch")]),t._v(";"),s("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v('"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("执行命令："),s("code",[t._v("npm run merge-to-dev")]),t._v(",便可把当前分支的代码合并到develop分支")]),t._v(" "),s("h2",{attrs:{id:"设置git别名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置git别名"}},[t._v("#")]),t._v(" 设置Git别名")]),t._v(" "),s("p",[t._v("设置全局别名，例如执行："),s("code",[t._v("git to develop")]),t._v("\ngit 会自动执行：切换到 develop 分支，拉取代码，合并当前分支，推送到远程，切换回当前分支")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" config "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--global")]),t._v(" alias.to "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'!f() { cur_branch=$(git branch --show-current); git checkout $1 && git pull && git merge --no-edit $cur_branch && git push && git checkout $cur_branch; }; f'")]),t._v("\n")])])]),s("h2",{attrs:{id:"贪吃蛇"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#贪吃蛇"}},[t._v("#")]),t._v(" 贪吃蛇")]),t._v(" "),s("img",{attrs:{src:"/tech/github-snake.svg",alt:"github-snake"}}),t._v(" "),s("p",[t._v("以上贪吃蛇SVG，可以直接使用：")]),t._v(" "),s("div",{staticClass:"language-html extra-class"},[s("pre",{pre:!0,attrs:{class:"language-html"}},[s("code",[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token tag"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("img")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("src")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://jasonbai008.github.io/tech/github-snake.svg"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("alt")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("github-snake"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])]),s("p",[t._v("也可以根据自己Github的提交记录生成个人的svg。但是非常麻烦，以下是详细教程：")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://zhuanlan.zhihu.com/p/659930382",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何在github主页放一条贪吃蛇"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"vite打包配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vite打包配置"}},[t._v("#")]),t._v(" Vite打包配置")]),t._v(" "),s("p",[t._v("为打包后的文件归类，配置 "),s("code",[t._v("vite.config.js")]),t._v(" ：")]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("outDir")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dist"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 打包输出目录")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("rollupOptions")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("output")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定 JS 输出到 `dist/js` 目录")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("entryFileNames")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name].[hash].js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("chunkFileNames")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'js/[name].[hash].js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("assetFileNames")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("assetInfo")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定 CSS 输出到 `dist/css` 目录")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assetInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" assetInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.css'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'css/[name].[hash][extname]'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 指定 字体 输出到 `dist/fonts` 目录")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("assetInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" assetInfo"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("endsWith")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.ttf'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'fonts/[name].[hash][extname]'")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 其他资源文件输出到 `dist/assets` 目录")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'assets/[name].[hash][extname]'")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"注册免费域名"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注册免费域名"}},[t._v("#")]),t._v(" 注册免费域名")]),t._v(" "),s("p",[t._v("网址："),s("a",{attrs:{href:"https://nic.eu.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://nic.eu.org/"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("eu.org")]),t._v(" 是 1996 年开始运营的公益域名服务。其设立的主要目的是为那些无力支付付费域名的高额费用的用户或非盈利组织提供永久（至少在 2030 年之前不会过期）免费且不限量的顶级域名。")]),t._v(" "),s("p",[t._v("具体步骤参考："),s("a",{attrs:{href:"https://blog.csdn.net/qq_44029998/article/details/131002532",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://blog.csdn.net/qq_44029998/article/details/131002532"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("strong",[t._v("以下是粗略的步骤：")])]),t._v(" "),s("ol",[s("li",[t._v("注册用户，尽量填写"),s("strong",[t._v("真实信息")]),t._v("，尤其是邮箱。")]),t._v(" "),s("li",[t._v("收到激活邮件，进入激活页面，保存自己的"),s("strong",[t._v("用户名和密码")]),t._v("到本地。")]),t._v(" "),s("li",[t._v("登录网站，点击按钮申请一个新域名。")]),t._v(" "),s("li",[t._v("填写带后缀的"),s("strong",[t._v("完整域名")]),t._v("，例如："),s("code",[t._v("example.eu.org")])]),t._v(" "),s("li",[t._v("Name servers 板块，勾选第一个选项："),s("code",[t._v("server names")])]),t._v(" "),s("li",[t._v("登录 "),s("a",{attrs:{href:"https://www.dnspod.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("DNSPod"),s("OutboundLink")],1),t._v(" ，添加刚才申请的域名，拿到两个 NDS 服务器地址")]),t._v(" "),s("li",[t._v("回到 eu.org 在最后的列表中填入刚才的两个地址")]),t._v(" "),s("li",[t._v("提交表单，等待邮件通知，等待时间从几天到几个月不等。")])]),t._v(" "),s("h2",{attrs:{id:"使用-cloudflare-加速你的网页"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-cloudflare-加速你的网页"}},[t._v("#")]),t._v(" 使用 Cloudflare 加速你的网页")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("注意")]),t._v(" "),s("p",[t._v("Cloudflare 的 Workers 都已被封，Pages 目前可以使用。"),s("br"),t._v("\n打开 Cloudflare 最好翻墙，以前不翻墙能很顺利的打开，现在有被墙的风险！")])]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("非常棒")]),t._v(" "),s("p",[t._v("在 Github 上新建私人仓库，在 Cloudflare 上针对私人仓库，新建 Pages，这样就可以避免暴露源码了！")])]),t._v(" "),s("p",[t._v("为了能有个免费的网页，真是太难了，先后探索了："),s("br"),t._v(" "),s("code",[t._v("Github Pages")]),t._v(" > "),s("code",[t._v("Gitee Pages")]),t._v(" > "),s("code",[t._v("Github Pages")]),t._v(" > "),s("code",[t._v("Cloudflare Pages")])]),t._v(" "),s("ul",[s("li",[s("strong",[t._v("Github Pages")]),t._v(" 访问速度太慢，尤其页面上有很多图片的情况下。")]),t._v(" "),s("li",[s("strong",[t._v("Gitee Pages")]),t._v(" 本来访问速度杠杠的，但是今年五一之前突然下线了，彻底不能用了。")]),t._v(" "),s("li",[s("strong",[t._v("Cloudflare Pages")]),t._v(" 没想到出奇的好使，"),s("strong",[t._v("访问速度比 Github 快一倍！而且免费！")])])]),t._v(" "),s("p",[t._v("下面介绍一下 Cloudflare Pages 的使用步骤：")]),t._v(" "),s("ol",[s("li",[t._v("打开 "),s("a",{attrs:{href:"https://www.cloudflare-cn.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cloudflare 中国官网"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("使用个人邮箱注册并登录")]),t._v(" "),s("li",[t._v("进入到"),s("code",[t._v("个人账户")]),t._v(" > "),s("code",[t._v("Workers and Pages")]),t._v(" > 切换到 "),s("code",[t._v("Pages")]),t._v("选项卡")]),t._v(" "),s("li",[t._v("通过导入现有 Git 存储库创建，点击 "),s("code",[t._v("连接到 Git")]),t._v(" 按钮")]),t._v(" "),s("li",[t._v("关联你的个人 Github 账户，根据提示赋予权限")]),t._v(" "),s("li",[t._v("选择一个你的 Github 上的一个代码仓库，点击 "),s("code",[t._v("开始设置")])]),t._v(" "),s("li",[t._v("自定义一个满意的"),s("code",[t._v("项目名称")]),t._v("，到时候访问的地址是："),s("code",[t._v("项目名称.pages.dev")])]),t._v(" "),s("li",[t._v("如果是普通的 html 项目，直接开始部署")]),t._v(" "),s("li",[t._v("如果是 vue 项目，框架预设选择 "),s("code",[t._v("Vue")]),t._v("，构建命令 "),s("code",[t._v("npm run build")]),t._v("，构建输出目录"),s("code",[t._v("docs")])]),t._v(" "),s("li",[t._v("然后直接部署到全球节点，部署完，等待大概最多 5 分钟就可以访问了")])]),t._v(" "),s("h3",{attrs:{id:"部署旧项目遇到问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#部署旧项目遇到问题"}},[t._v("#")]),t._v(" 部署旧项目遇到问题")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 遇到这种报错：")]),t._v("\nat ChildProcess."),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("anonymous"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/snapshot/dist/run-build.js"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("p",[t._v("在部署设置步骤，设置环境变量： "),s("code",[t._v("YARN VERSION = 1")])]),t._v(" "),s("p",[t._v("如遇到其它报错，继续叠加设置环境变量： "),s("code",[t._v("NODE OPTIONS = --openssl-legacy-provider")])]),t._v(" "),s("h2",{attrs:{id:"nginx-开启-https"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nginx-开启-https"}},[t._v("#")]),t._v(" Nginx 开启 https")]),t._v(" "),s("h3",{attrs:{id:"购买免费证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#购买免费证书"}},[t._v("#")]),t._v(" 购买免费证书")]),t._v(" "),s("blockquote",[s("p",[s("strong",[t._v("DV 证书")]),t._v(" ：域名验证型证书，证书审核方式为通过验证域名所有权即可签发证书。此类型证书适合个人和小微企业申请，价格较低，申请快捷，但是证书中无法显示企业信息。")])]),t._v(" "),s("p",[t._v("阿里云上可以免费领取 "),s("strong",[t._v("20 个免费 DV 证书")]),t._v("，每个证书"),s("strong",[t._v("有效期 1 年")]),t._v("，领取地址："),s("a",{attrs:{href:"https://www.aliyun.com/product/cas",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://www.aliyun.com/product/cas"),s("OutboundLink")],1),t._v("，\n领取完，申请绑定域名即可。")]),t._v(" "),s("h3",{attrs:{id:"下载证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#下载证书"}},[t._v("#")]),t._v(" 下载证书")]),t._v(" "),s("p",[t._v("下载 nginx 使用的证书，包括："),s("strong",[t._v("xxx.key")]),t._v("（私钥） 和 "),s("strong",[t._v("xxx.pem")]),t._v(" （证书）")]),t._v(" "),s("h3",{attrs:{id:"上传证书"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#上传证书"}},[t._v("#")]),t._v(" 上传证书")]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提前登录服务器，新建cert文件夹")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 然后在本地执行上传命令")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" xxx.key xxx.pem root@xx.xx.xx.xx:/etc/nginx/cert\n")])])]),s("h3",{attrs:{id:"配置-nginx"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#配置-nginx"}},[t._v("#")]),t._v(" 配置 nginx")]),t._v(" "),s("ol",[s("li",[t._v("首先编辑："),s("code",[t._v("/etc/nginx/sites-available/default")]),t._v(" 配置文件，设置 http 请求重定向到 https：")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[t._v("server "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    listen "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 填写绑定证书的域名")]),t._v("\n    server_name xxxxxx.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#强制将http的URL重写成https")]),t._v("\n    rewrite ^"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v(".*"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" https://"),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$server_name")]),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v(" permanent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[t._v("添加监听 443 端口的配置文件: luban")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在/etc/nginx/sites-available/路径下新建luban文件")]),t._v("\nserver "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# SSL configuration")]),t._v("\n\tlisten "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl default_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tlisten "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("::"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(":443 ssl default_server"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tserver_name xxx.com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tssl_certificate  /etc/nginx/cert/xxx.pem"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\tssl_certificate_key /etc/nginx/cert/xxx.key"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\troot /home/xxx"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tindex index.html index.htm index.nginx-debian.html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n\tlocation / "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\ttry_files "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("404")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\t"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("建立软连接并重启服务")])]),t._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" /etc/nginx/sites-available/luban /etc/nginx/sites-enabled/luban\nnginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-s")]),t._v(" reload\n")])])]),s("h2",{attrs:{id:"使用-fetch-与-chatgpt-交互"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-fetch-与-chatgpt-交互"}},[t._v("#")]),t._v(" 使用 fetch 与 chatGPT 交互")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("WARNING")]),t._v(" "),s("p",[t._v("ChatGPT 的 API 接口在国内已被墙！只能通过国外的服务器转发请求。")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 与text-davinci-003模型互动的请求示例：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.openai.com/v1/completions"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"post"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Authorization")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bearer sk-xxxxxxxxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 格式：`Bearer ${your key string}`")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"text-davinci-003"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 模型")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("temperature")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0表示生成明确的答案，1会更有创造力")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("max_tokens")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回的最大字符数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("prompt")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, how do you do ?"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输入的文本")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 与gpt-3.5-turbo模型互动的请求示例：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://api.openai.com/v1/chat/completions"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("method")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"post"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"Content-Type"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"application/json"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("Authorization")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Bearer sk-xxxxxxxxxx"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 格式：`Bearer ${your key string}`")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("body")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("stringify")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("model")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gpt-3.5-turbo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 最新模型")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("temperature")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 0表示生成明确的答案，1会更有创造力")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("max_tokens")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回的最大字符数")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("messages")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("role")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"user"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("content")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Hello, how do you do ?"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 输入的文本，以user普通用户的形式与AI助手对话")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("json")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("res")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("h2",{attrs:{id:"搭建免费网站的三种途径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#搭建免费网站的三种途径"}},[t._v("#")]),t._v(" 搭建免费网站的三种途径")]),t._v(" "),s("h3",{attrs:{id:"_1-github-pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-github-pages"}},[t._v("#")]),t._v(" 1. "),s("strong",[t._v("Github Pages")]),t._v(" "),s("Badge",{attrs:{text:"不推荐",type:"error"}})],1),t._v(" "),s("p",[t._v("将网站代码托管到 Github 上的仓库里，开启 Pages 服务，即可实现免费的 https 网站。但由于"),s("strong",[t._v("国内的封锁")]),t._v("。这条路基本上被堵死了。")]),t._v(" "),s("h3",{attrs:{id:"_2-cloudflare-pages"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-cloudflare-pages"}},[t._v("#")]),t._v(" 2. "),s("strong",[t._v("Cloudflare Pages")]),t._v(" "),s("Badge",{attrs:{text:"推荐",type:"tip"}})],1),t._v(" "),s("p",[t._v("注册并登录 "),s("a",{attrs:{href:"https://www.cloudflare-cn.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Cloudflare"),s("OutboundLink")],1),t._v("，新建 Pages，可以关联自己的 Github 仓库，这样更新仓库后，Cloudflare 会自动更新对应的 Pages，非常方便。")]),t._v(" "),s("h3",{attrs:{id:"_3-亚马逊云服务器-aws"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-亚马逊云服务器-aws"}},[t._v("#")]),t._v(" 3. "),s("strong",[t._v("亚马逊云服务器 AWS")]),t._v(" "),s("Badge",{attrs:{text:"可选",type:"tip"}})],1),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("扣费提醒")]),t._v(" "),s("p",[t._v("开通完实例，部署完网站后，一定要在控制台关闭 22 端口，否则每天都会产生美元费用")])]),t._v(" "),s("p",[t._v("精通前后端的同学可以申请亚马逊云服务器，将个人网站放到上面。注册需要：")]),t._v(" "),s("ul",[s("li",[t._v("一张信用卡")]),t._v(" "),s("li",[t._v("一个手机号")]),t._v(" "),s("li",[t._v("一个邮箱")])]),t._v(" "),s("p",[t._v("注册成功后，"),s("strong",[t._v("可以开启一个免费的云服务器，免费使用 12 个月。")])]),t._v(" "),s("ul",[s("li",[t._v("30G 的空间")]),t._v(" "),s("li",[t._v("每个月 750h 的服务器运行时间（创建 2 个实例就会超时扣费）")]),t._v(" "),s("li",[t._v("如果使用超过 12 个月，会被扣美元，一定提前手动关闭实例")]),t._v(" "),s("li",[t._v("创建完实例后，把博客部署上去后，一定要在实例"),s("strong",[t._v("管理页面>安全>入站规则")]),t._v("，"),s("strong",[t._v("关闭 22 端口")]),t._v("，否则实例自己和别的区域通信会产生美元费用。")]),t._v(" "),s("li",[t._v("部署网站前，先开启 22 端口。部署完再关闭 22 端口")])]),t._v(" "),s("p",[s("a",{attrs:{href:"https://opssh.cn/fenxiang/255.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("申请教程"),s("OutboundLink")],1),t._v("、"),s("a",{attrs:{href:"https://aws.amazon.com/cn/ec2/?hp=tile&so-exp=below&ct=fs",target:"_blank",rel:"noopener noreferrer"}},[t._v("申请入口"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"本地预览打包后的应用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#本地预览打包后的应用"}},[t._v("#")]),t._v(" 本地预览打包后的应用")]),t._v(" "),s("ol",[s("li",[t._v("安装 VSCode 插件："),s("code",[t._v("Live Server")])]),t._v(" "),s("li",[t._v("修改根目录下的 vue.config.js 文件")])]),t._v(" "),s("div",{staticClass:"language-js extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" defineConfig "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"@vue/cli-service"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("defineConfig")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("transpileDependencies")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("publicPath")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/dist/"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 这里改成dist")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("devServer")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token literal-property property"}},[t._v("host")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"localhost"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("确保应用的路由模式是 "),s("code",[t._v("hash")]),t._v(" 模式")]),t._v(" "),s("li",[t._v("执行打包命令："),s("code",[t._v("yarn build")])]),t._v(" "),s("li",[t._v("VSCode 左侧文件树中，在 dist/index.html 上右击鼠标选择："),s("code",[t._v("Open with Live Server")])]),t._v(" "),s("li",[t._v("在浏览器里输入："),s("code",[t._v("http://localhost:5500/dist/index.html")]),t._v(" 即可")])]),t._v(" "),s("h2",{attrs:{id:"使用-shell-脚本部署网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用-shell-脚本部署网站"}},[t._v("#")]),t._v(" 使用 shell 脚本部署网站")]),t._v(" "),s("p",[t._v("我们可以在本地通过 shell 脚本进行项目打包、代码提交、部署到服务器等操作。")]),t._v(" "),s("ol",[s("li",[t._v("在项目根目录新建一个"),s("code",[t._v("deploy.sh")]),t._v("文件")]),t._v(" "),s("li",[t._v("在 package.json 中添加 npm scripts")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("div",{staticClass:"highlight-lines"},[s("br"),s("br"),s("div",{staticClass:"highlighted"},[t._v(" ")]),s("br"),s("br"),s("br")]),s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"scripts"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string-property property"}},[t._v('"deploy"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sh deploy.sh"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[t._v("编辑 deploy.sh，添加部署脚本")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token shebang important"}},[t._v("#!/bin/bash")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 确保脚本抛出遇到的错误，遇到错误退出")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("set")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-e")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Deploying website on xxx.xxx.xx.xxx ..."')]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 生成静态文件")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run build\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将打包后的文件上传至目标服务器对应路径下")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-r")]),t._v(" ./dist/* root@xxx.xxx.xx.xxx:/home/project\n")])])]),s("ol",{attrs:{start:"4"}},[s("li",[t._v("部署网站")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run deploy\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" deploy\n")])])]),s("h2",{attrs:{id:"在-gitee-上部署自己的网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-gitee-上部署自己的网站"}},[t._v("#")]),t._v(" 在 Gitee 上部署自己的网站")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("由于"),s("strong",[t._v("Gitee 网站")]),t._v("审核力度非常变态，普通的博客也很有可能无法正常部署，提示有违禁内容")])]),t._v(" "),s("ol",[s("li",[t._v("打开 "),s("a",{attrs:{href:"https://gitee.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitee.com"),s("OutboundLink")],1),t._v(" 并注册一个账号，登录绑定自己的邮箱和手机号")]),t._v(" "),s("li",[t._v("在 gitee 上"),s("strong",[t._v("新建一个代码仓库")]),t._v("，仓库名称根据个人喜好来定，比如 myRepo")]),t._v(" "),s("li",[t._v("复制代码仓库地址")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/tech/t1.png",alt:"图片"}})]),t._v(" "),s("ol",{attrs:{start:"4"}},[s("li",[t._v("下载并安装代码版本管理工具 "),s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("在本地打开一个文件夹，要在这个文件夹下面放置刚才新建的代码仓库")]),t._v(" "),s("li",[t._v("在打开的文件夹空白处，右击鼠标，选择 "),s("strong",[t._v("Git Bash Here")]),t._v("，打开 Git 命令行窗口")]),t._v(" "),s("li",[t._v("拉取代码仓库：在 git bash 窗口里输入")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 你的代码仓库地址(https开头的，步骤3)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://gitee.com/lubanseven/myRepo.git\n")])])]),s("ol",{attrs:{start:"8"}},[s("li",[t._v("上一步好像需要输入 Gitee 的用户名和密码")]),t._v(" "),s("li",[t._v("进入到你的代码仓库")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myRepo\n")])])]),s("ol",{attrs:{start:"10"}},[s("li",[s("p",[t._v("将包含了 index.html 的相关文件复制进来")]),t._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[t._v("TIP")]),t._v(" "),s("p",[t._v("根目录下需要有 index.html 文件"),s("br"),t._v("\n文件中不能有二维码图片")])])]),t._v(" "),s("li",[s("p",[t._v("提交代码到远程仓库")])])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加到暂存区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交到本地仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注信息'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送到Gitee上面的仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])]),s("ol",{attrs:{start:"12"}},[s("li",[t._v("返回 Gitee 上的代码仓库页面，选择 "),s("strong",[t._v("服务 > Pages")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/tech/t2.png",alt:"图片"}})]),t._v(" "),s("ol",{attrs:{start:"13"}},[s("li",[t._v("首次开启 Pages 服务，需要先实名认证（1 个工作日）")]),t._v(" "),s("li",[t._v("认证通过后，就可以开启服务了（点击：更新 按钮），开启后会自动生成"),s("strong",[t._v("网站地址")])])]),t._v(" "),s("p",[s("img",{attrs:{src:"/tech/t3.png",alt:"图片"}})]),t._v(" "),s("ol",{attrs:{start:"15"}},[s("li",[t._v("后续更改文件后，执行步"),s("strong",[t._v("骤 11")]),t._v(" 和"),s("strong",[t._v("步骤 14")]),t._v(" 即可")])]),t._v(" "),s("h2",{attrs:{id:"在-github-上部署自己的网站"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#在-github-上部署自己的网站"}},[t._v("#")]),t._v(" 在 GitHub 上部署自己的网站")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("警告")]),t._v(" "),s("p",[t._v("由于众所周知的原因，GitHub 在国内似墙非墙，打开或者提交代码需要尝试多次，看运气")])]),t._v(" "),s("ol",[s("li",[t._v("打开 "),s("a",{attrs:{href:"https://github.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("github.com"),s("OutboundLink")],1),t._v("，注册一个账号并登录")]),t._v(" "),s("li",[t._v("在 github 上"),s("strong",[t._v("新建一个代码仓库")]),t._v("，仓库名称根据个人喜好来定，比如 myRepo")]),t._v(" "),s("li",[t._v("复制代码仓库地址")]),t._v(" "),s("li",[t._v("下载并安装代码版本管理工具 "),s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("在本地打开一个文件夹，要在这个文件夹下面放置刚才新建的代码仓库")]),t._v(" "),s("li",[t._v("在打开的文件夹空白处，右击鼠标，选择 "),s("strong",[t._v("Git Bash Here")]),t._v("，打开 Git 命令行窗口")]),t._v(" "),s("li",[t._v("拉取代码仓库：在 git bash 窗口里输入")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 你的代码仓库地址(https开头的，步骤3)")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" clone https://github.com/JasonBai007/myRepo.git\n")])])]),s("ol",{attrs:{start:"8"}},[s("li",[t._v("上一步好像需要输入 github 的用户名和密码")]),t._v(" "),s("li",[t._v("进入到你的代码仓库")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" myRepo\n")])])]),s("ol",{attrs:{start:"10"}},[s("li",[t._v("将包含了 index.html 的相关文件复制进去")]),t._v(" "),s("li",[t._v("提交代码到远程仓库")])]),t._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加到暂存区")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 提交到本地仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'备注信息'")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 推送到Github上面的仓库")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push\n")])])]),s("ol",{attrs:{start:"12"}},[s("li",[t._v("返回代码仓库页面，选择 "),s("strong",[t._v("Settings > Pages > Save")]),t._v("，即可开启 Pages 服务")])]),t._v(" "),s("p",[s("img",{attrs:{src:"/tech/t4.png",alt:"图片"}})]),t._v(" "),s("ol",{attrs:{start:"13"}},[s("li",[t._v("后续每次更新文件后，执行"),s("strong",[t._v("步骤 11")]),t._v("，过几分钟刷新页面，网站就自己更新了")])])])}),[],!1,null,null,null);s.default=e.exports}}]);